// ============================================================================
// TRANSLATIONS
// ============================================================================

const translations = {
    it: {
        // Sidebar
        appTitle: "Cost Accounting",
        appSubtitle: "Strumenti Professionali",
        reciprocalMethod: "Metodo Reciproco",
        wipValuation: "Valutazione WIP",
        
        // Reciprocal Method
        reciprocalTitle: "Metodo Reciproco",
        reciprocalSubtitle: "Risoluzione di esercizi con Equazioni Simultanee",
        step1Title: "Definisci i Dipartimenti",
        step2Title: "Inserisci i Costi Primari",
        step3Title: "Inserisci le Unità di Servizio Rese",
        step4Title: "Basi di Allocazione (Opzionale)",
        step4Subtitle: "Inserisci le basi (es. w.u, machine hours) per calcolare i cost rates",
        supportDepts: "Dipartimenti di Supporto",
        productionDepts: "Dipartimenti di Produzione",
        addSupport: "+ Aggiungi Support",
        addProduction: "+ Aggiungi Production",
        confirmDepts: "Conferma Dipartimenti →",
        confirmCosts: "Conferma Costi →",
        confirmUnits: "Conferma Unità →",
        calculateResults: "Calcola Risultati",
        results: "Risultati",
        directCost: "Costo diretto",
        totalUnits: "Totale unità",
        costRate: "Cost rate",
        allocated: "Allocato",
        allocationDetails: "Dettaglio Allocazioni",
        total: "TOTALE",
        totalGeneral: "TOTALE GENERALE",
        
        // WIP
        wipTitle: "Valutazione WIP",
        wipSubtitle: "Calcolo della valutazione del Work in Process",
        baseConfig: "Configurazione Base",
        valuationMethod: "Metodo di Valutazione",
        deptName: "Nome Dipartimento",
        periodCosts: "Costi del Periodo",
        materials: "Materials",
        conversionCosts: "Indirect Conversion Costs",
        openingWIP: "Opening Work in Process",
        unitsInWIP: "Unità in WIP Iniziale",
        completionPercent: "Completion % (CC%)",
        materialsCostWIP: "Costo Materials WIP",
        conversionCostWIP: "Costo Conversion WIP",
        periodMovements: "Movimenti del Periodo",
        unitsStarted: "Unità Started",
        unitsCompleted: "Unità Completed",
        endingWIPCC: "Ending WIP CC%",
        calculateWIP: "Calcola WIP Valuation",
        wipResults: "Risultati WIP",
        physicalFlow: "Physical Flow",
        openingWIPLabel: "Opening WIP",
        started: "Started",
        completed: "Completed",
        startedCompleted: "Started & Completed",
        endingWIP: "Ending WIP",
        equivalentUnits: "Equivalent Units",
        costPerEU: "Cost per Equivalent Unit",
        completingOpeningWIP: "Completing Opening WIP",
        openingDM: "Opening DM",
        openingCC: "Opening CC",
        additionalCC: "Additional CC to complete",
        totalOpeningWIP: "Total Opening WIP",
        startedAndCompleted: "Started and Completed",
        totalStartedCompleted: "Total Started & Completed",
        endingWIPSection: "Ending WIP",
        totalEndingWIP: "Total Ending WIP",
        finishedGoods: "FINISHED GOODS",
        units: "units",
        unit: "unit",
        
        // Break-Even
        breakEvenAnalysis: "Break-Even Analysis",
        breakEvenTitle: "Break-Even Analysis",
        breakEvenSubtitle: "Analisi del punto di pareggio e margine di contribuzione",
        productInfo: "Informazioni Prodotto",
        productName: "Nome Prodotto",
        sellingPrice: "Prezzo di Vendita",
        variableCosts: "Costi Variabili",
        variableCostPerUnit: "Costo Variabile per Unità",
        variableCostBreakdown: "Dettaglio (opzionale)",
        fixedCosts: "Costi Fissi",
        totalFixedCosts: "Costi Fissi Totali",
        fixedCostBreakdown: "Dettaglio (opzionale)",
        targetAnalysis: "Analisi Target (Opzionale)",
        targetProfit: "Profitto Target",
        expectedSales: "Vendite Previste",
        calculateBreakEven: "Calcola Break-Even",
        contributionMargin: "Margine di Contribuzione",
        contributionMarginRatio: "Rapporto Margine di Contribuzione",
        breakEvenUnits: "Break-Even Point (Unità)",
        breakEvenRevenue: "Break-Even Point (Fatturato)",
        unitsForTarget: "Unità per Profitto Target",
        marginOfSafety: "Margine di Sicurezza",
        marginOfSafetyPercent: "Margine di Sicurezza %",
        operatingLeverage: "Leva Operativa",
        breakEvenChart: "Grafico Break-Even",
        revenue: "Ricavi",
        totalCost: "Costo Totale",
        exportPDF: "Esporta PDF",
        exportExcel: "Esporta Excel",
        sensitivityAnalysis: "Sensitivity Analysis",
        fixedCostsChange: "Variazione Costi Fissi (%)",
        variableCostsChange: "Variazione Costi Variabili (%)",
        priceChange: "Variazione Prezzo (%)",
        interpretation: "Interpretazione",
        sensitivityLow: "Impatto minimo sul break-even point",
        sensitivityModerate: "Impatto moderato sul break-even point",
        sensitivityHigh: "Impatto significativo sul break-even point",
        sensitivityVeryHigh: "Impatto molto elevato sul break-even point",
        bepIncreased: "Il punto di pareggio è aumentato, servono più vendite",
        bepDecreased: "Il punto di pareggio è diminuito, servono meno vendite",
        scenario: "Scenario",
        baseScenario: "Base",
        newScenario: "Nuovo",
        mosImproved: "Il margine di sicurezza è migliorato significativamente. L'azienda ha più cuscinetto prima di andare in perdita",
        mosSlightlyImproved: "Il margine di sicurezza è leggermente migliorato",
        mosSlightlyWorse: "Il margine di sicurezza è leggermente peggiorato",
        mosWorse: "Il margine di sicurezza è peggiorato significativamente. L'azienda è più vicina al punto di pareggio e quindi più a rischio",
        mosWarning: "Attenzione: margine molto basso!",
        mosGood: "Margine di sicurezza confortevole",
        showProcedimento: "Mostra Procedimento",
        procedimento: "Procedimento di Calcolo",
        setupSystem: "Impostazione del Sistema",
        reciprocalExplanation: "Il metodo reciproco risolve un sistema di equazioni simultanee per allocare i costi dei dipartimenti di supporto, considerando i servizi reciproci tra loro",
        simultaneousEquations: "Equazioni Simultanee",
        systemSolution: "Soluzione del Sistema",
        allocationToProduction: "Allocazione ai Dipartimenti di Produzione",
        inputData: "Dati di Input",
        finalValuation: "Valutazione Finale",
        valuation: "Valutazione"
    },
    
    en: {
        // Sidebar
        appTitle: "Cost Accounting",
        appSubtitle: "Professional Tools",
        reciprocalMethod: "Reciprocal Method",
        wipValuation: "WIP Valuation",
        
        // Reciprocal Method
        reciprocalTitle: "Reciprocal Method",
        reciprocalSubtitle: "Solving exercises with Simultaneous Equations",
        step1Title: "Define Departments",
        step2Title: "Enter Primary Costs",
        step3Title: "Enter Service Units Rendered",
        step4Title: "Allocation Bases (Optional)",
        step4Subtitle: "Enter bases (e.g. w.u, machine hours) to calculate cost rates",
        supportDepts: "Support Departments",
        productionDepts: "Production Departments",
        addSupport: "+ Add Support",
        addProduction: "+ Add Production",
        confirmDepts: "Confirm Departments →",
        confirmCosts: "Confirm Costs →",
        confirmUnits: "Confirm Units →",
        calculateResults: "Calculate Results",
        results: "Results",
        directCost: "Direct cost",
        totalUnits: "Total units",
        costRate: "Cost rate",
        allocated: "Allocated",
        allocationDetails: "Allocation Details",
        total: "TOTAL",
        totalGeneral: "TOTAL GENERAL",
        
        // WIP
        wipTitle: "WIP Valuation",
        wipSubtitle: "Work in Process valuation calculation",
        baseConfig: "Base Configuration",
        valuationMethod: "Valuation Method",
        deptName: "Department Name",
        periodCosts: "Period Costs",
        materials: "Materials",
        conversionCosts: "Indirect Conversion Costs",
        openingWIP: "Opening Work in Process",
        unitsInWIP: "Units in Opening WIP",
        completionPercent: "Completion % (CC%)",
        materialsCostWIP: "Materials Cost WIP",
        conversionCostWIP: "Conversion Cost WIP",
        periodMovements: "Period Movements",
        unitsStarted: "Units Started",
        unitsCompleted: "Units Completed",
        endingWIPCC: "Ending WIP CC%",
        calculateWIP: "Calculate WIP Valuation",
        wipResults: "WIP Results",
        physicalFlow: "Physical Flow",
        openingWIPLabel: "Opening WIP",
        started: "Started",
        completed: "Completed",
        startedCompleted: "Started & Completed",
        endingWIP: "Ending WIP",
        equivalentUnits: "Equivalent Units",
        costPerEU: "Cost per Equivalent Unit",
        completingOpeningWIP: "Completing Opening WIP",
        openingDM: "Opening DM",
        openingCC: "Opening CC",
        additionalCC: "Additional CC to complete",
        totalOpeningWIP: "Total Opening WIP",
        startedAndCompleted: "Started and Completed",
        totalStartedCompleted: "Total Started & Completed",
        endingWIPSection: "Ending WIP",
        totalEndingWIP: "Total Ending WIP",
        finishedGoods: "FINISHED GOODS",
        units: "units",
        unit: "unit",
        
        // Break-Even
        breakEvenAnalysis: "Break-Even Analysis",
        breakEvenTitle: "Break-Even Analysis",
        breakEvenSubtitle: "Break-even point and contribution margin analysis",
        productInfo: "Product Information",
        productName: "Product Name",
        sellingPrice: "Selling Price",
        variableCosts: "Variable Costs",
        variableCostPerUnit: "Variable Cost per Unit",
        variableCostBreakdown: "Breakdown (optional)",
        fixedCosts: "Fixed Costs",
        totalFixedCosts: "Total Fixed Costs",
        fixedCostBreakdown: "Breakdown (optional)",
        targetAnalysis: "Target Analysis (Optional)",
        targetProfit: "Target Profit",
        expectedSales: "Expected Sales",
        calculateBreakEven: "Calculate Break-Even",
        contributionMargin: "Contribution Margin",
        contributionMarginRatio: "Contribution Margin Ratio",
        breakEvenUnits: "Break-Even Point (Units)",
        breakEvenRevenue: "Break-Even Point (Revenue)",
        unitsForTarget: "Units for Target Profit",
        marginOfSafety: "Margin of Safety",
        marginOfSafetyPercent: "Margin of Safety %",
        operatingLeverage: "Operating Leverage",
        breakEvenChart: "Break-Even Chart",
        revenue: "Revenue",
        totalCost: "Total Cost",
        exportPDF: "Export PDF",
        exportExcel: "Export Excel",
        sensitivityAnalysis: "Sensitivity Analysis",
        fixedCostsChange: "Fixed Costs Change (%)",
        variableCostsChange: "Variable Costs Change (%)",
        priceChange: "Price Change (%)",
        interpretation: "Interpretation",
        sensitivityLow: "Minimal impact on break-even point",
        sensitivityModerate: "Moderate impact on break-even point",
        sensitivityHigh: "Significant impact on break-even point",
        sensitivityVeryHigh: "Very high impact on break-even point",
        bepIncreased: "Break-even point increased, more sales needed",
        bepDecreased: "Break-even point decreased, fewer sales needed",
        scenario: "Scenario",
        baseScenario: "Base",
        newScenario: "New",
        mosImproved: "Margin of safety improved significantly. The company has more cushion before breaking even",
        mosSlightlyImproved: "Margin of safety slightly improved",
        mosSlightlyWorse: "Margin of safety slightly worse",
        mosWorse: "Margin of safety worsened significantly. The company is closer to break-even and therefore more at risk",
        mosWarning: "Warning: very low margin!",
        mosGood: "Comfortable margin of safety",
        showProcedimento: "Show Procedure",
        procedimento: "Calculation Procedure",
        setupSystem: "System Setup",
        reciprocalExplanation: "The reciprocal method solves a system of simultaneous equations to allocate support department costs, considering reciprocal services between them",
        simultaneousEquations: "Simultaneous Equations",
        systemSolution: "System Solution",
        allocationToProduction: "Allocation to Production Departments",
        inputData: "Input Data",
        finalValuation: "Final Valuation",
        valuation: "Valuation"
    },
    
    fr: {
        // Sidebar
        appTitle: "Comptabilité Analytique",
        appSubtitle: "Outils Professionnels",
        reciprocalMethod: "Méthode Réciproque",
        wipValuation: "Évaluation WIP",
        
        // Reciprocal Method
        reciprocalTitle: "Méthode Réciproque",
        reciprocalSubtitle: "Résolution d'exercices avec Équations Simultanées",
        step1Title: "Définir les Départements",
        step2Title: "Entrer les Coûts Primaires",
        step3Title: "Entrer les Unités de Service Rendues",
        step4Title: "Bases d'Allocation (Optionnel)",
        step4Subtitle: "Entrez les bases (ex. u.o, heures machine) pour calculer les taux de coût",
        supportDepts: "Départements de Support",
        productionDepts: "Départements de Production",
        addSupport: "+ Ajouter Support",
        addProduction: "+ Ajouter Production",
        confirmDepts: "Confirmer Départements →",
        confirmCosts: "Confirmer Coûts →",
        confirmUnits: "Confirmer Unités →",
        calculateResults: "Calculer Résultats",
        results: "Résultats",
        directCost: "Coût direct",
        totalUnits: "Total unités",
        costRate: "Taux de coût",
        allocated: "Alloué",
        allocationDetails: "Détails d'Allocation",
        total: "TOTAL",
        totalGeneral: "TOTAL GÉNÉRAL",
        
        // WIP
        wipTitle: "Évaluation WIP",
        wipSubtitle: "Calcul de l'évaluation du Work in Process",
        baseConfig: "Configuration de Base",
        valuationMethod: "Méthode d'Évaluation",
        deptName: "Nom du Département",
        periodCosts: "Coûts de la Période",
        materials: "Matériaux",
        conversionCosts: "Coûts de Conversion Indirects",
        openingWIP: "WIP d'Ouverture",
        unitsInWIP: "Unités en WIP Initial",
        completionPercent: "% d'Achèvement (CC%)",
        materialsCostWIP: "Coût Matériaux WIP",
        conversionCostWIP: "Coût Conversion WIP",
        periodMovements: "Mouvements de la Période",
        unitsStarted: "Unités Démarrées",
        unitsCompleted: "Unités Terminées",
        endingWIPCC: "CC% WIP Final",
        calculateWIP: "Calculer Évaluation WIP",
        wipResults: "Résultats WIP",
        physicalFlow: "Flux Physique",
        openingWIPLabel: "WIP d'Ouverture",
        started: "Démarrées",
        completed: "Terminées",
        startedCompleted: "Démarrées & Terminées",
        endingWIP: "WIP Final",
        equivalentUnits: "Unités Équivalentes",
        costPerEU: "Coût par Unité Équivalente",
        completingOpeningWIP: "Achèvement WIP d'Ouverture",
        openingDM: "DM d'Ouverture",
        openingCC: "CC d'Ouverture",
        additionalCC: "CC Additionnel pour terminer",
        totalOpeningWIP: "Total WIP d'Ouverture",
        startedAndCompleted: "Démarrées et Terminées",
        totalStartedCompleted: "Total Démarrées & Terminées",
        endingWIPSection: "WIP Final",
        totalEndingWIP: "Total WIP Final",
        finishedGoods: "PRODUITS FINIS",
        units: "unités",
        unit: "unité",
        
        // Break-Even
        breakEvenAnalysis: "Analyse du Seuil de Rentabilité",
        breakEvenTitle: "Analyse du Seuil de Rentabilité",
        breakEvenSubtitle: "Analyse du point mort et marge de contribution",
        productInfo: "Informations Produit",
        productName: "Nom du Produit",
        sellingPrice: "Prix de Vente",
        variableCosts: "Coûts Variables",
        variableCostPerUnit: "Coût Variable par Unité",
        variableCostBreakdown: "Détail (optionnel)",
        fixedCosts: "Coûts Fixes",
        totalFixedCosts: "Coûts Fixes Totaux",
        fixedCostBreakdown: "Détail (optionnel)",
        targetAnalysis: "Analyse Cible (Optionnel)",
        targetProfit: "Profit Cible",
        expectedSales: "Ventes Prévues",
        calculateBreakEven: "Calculer Seuil de Rentabilité",
        contributionMargin: "Marge de Contribution",
        contributionMarginRatio: "Ratio de Marge de Contribution",
        breakEvenUnits: "Seuil de Rentabilité (Unités)",
        breakEvenRevenue: "Seuil de Rentabilité (Chiffre d'Affaires)",
        unitsForTarget: "Unités pour Profit Cible",
        marginOfSafety: "Marge de Sécurité",
        marginOfSafetyPercent: "Marge de Sécurité %",
        operatingLeverage: "Levier Opérationnel",
        breakEvenChart: "Graphique Seuil de Rentabilité",
        revenue: "Chiffre d'Affaires",
        totalCost: "Coût Total",
        exportPDF: "Exporter PDF",
        exportExcel: "Exporter Excel",
        sensitivityAnalysis: "Analyse de Sensibilité",
        fixedCostsChange: "Variation Coûts Fixes (%)",
        variableCostsChange: "Variation Coûts Variables (%)",
        priceChange: "Variation Prix (%)",
        interpretation: "Interprétation",
        sensitivityLow: "Impact minimal sur le seuil de rentabilité",
        sensitivityModerate: "Impact modéré sur le seuil de rentabilité",
        sensitivityHigh: "Impact significatif sur le seuil de rentabilité",
        sensitivityVeryHigh: "Impact très élevé sur le seuil de rentabilité",
        bepIncreased: "Le seuil de rentabilité a augmenté, plus de ventes nécessaires",
        bepDecreased: "Le seuil de rentabilité a diminué, moins de ventes nécessaires",
        scenario: "Scénario",
        baseScenario: "Base",
        newScenario: "Nouveau",
        mosImproved: "La marge de sécurité s'est améliorée de manière significative. L'entreprise a plus de coussin avant d'atteindre le seuil",
        mosSlightlyImproved: "La marge de sécurité s'est légèrement améliorée",
        mosSlightlyWorse: "La marge de sécurité s'est légèrement détériorée",
        mosWorse: "La marge de sécurité s'est considérablement détériorée. L'entreprise est plus proche du seuil et donc plus à risque",
        mosWarning: "Attention: marge très faible!",
        mosGood: "Marge de sécurité confortable",
        showProcedimento: "Afficher la Procédure",
        procedimento: "Procédure de Calcul",
        setupSystem: "Configuration du Système",
        reciprocalExplanation: "La méthode réciproque résout un système d'équations simultanées pour allouer les coûts des départements de support, en tenant compte des services réciproques entre eux",
        simultaneousEquations: "Équations Simultanées",
        systemSolution: "Solution du Système",
        allocationToProduction: "Allocation aux Départements de Production",
        inputData: "Données d'Entrée",
        finalValuation: "Évaluation Finale",
        valuation: "Évaluation"
    },
    
    es: {
        // Sidebar
        appTitle: "Contabilidad de Costos",
        appSubtitle: "Herramientas Profesionales",
        reciprocalMethod: "Método Recíproco",
        wipValuation: "Valoración WIP",
        
        // Reciprocal Method
        reciprocalTitle: "Método Recíproco",
        reciprocalSubtitle: "Resolución de ejercicios con Ecuaciones Simultáneas",
        step1Title: "Definir Departamentos",
        step2Title: "Introducir Costos Primarios",
        step3Title: "Introducir Unidades de Servicio Prestadas",
        step4Title: "Bases de Asignación (Opcional)",
        step4Subtitle: "Introduce las bases (ej. u.o, horas máquina) para calcular las tasas de costo",
        supportDepts: "Departamentos de Soporte",
        productionDepts: "Departamentos de Producción",
        addSupport: "+ Añadir Soporte",
        addProduction: "+ Añadir Producción",
        confirmDepts: "Confirmar Departamentos →",
        confirmCosts: "Confirmar Costos →",
        confirmUnits: "Confirmar Unidades →",
        calculateResults: "Calcular Resultados",
        results: "Resultados",
        directCost: "Costo directo",
        totalUnits: "Total unidades",
        costRate: "Tasa de costo",
        allocated: "Asignado",
        allocationDetails: "Detalles de Asignación",
        total: "TOTAL",
        totalGeneral: "TOTAL GENERAL",
        
        // WIP
        wipTitle: "Valoración WIP",
        wipSubtitle: "Cálculo de la valoración del Work in Process",
        baseConfig: "Configuración Base",
        valuationMethod: "Método de Valoración",
        deptName: "Nombre del Departamento",
        periodCosts: "Costos del Período",
        materials: "Materiales",
        conversionCosts: "Costos de Conversión Indirectos",
        openingWIP: "WIP de Apertura",
        unitsInWIP: "Unidades en WIP Inicial",
        completionPercent: "% de Finalización (CC%)",
        materialsCostWIP: "Costo Materiales WIP",
        conversionCostWIP: "Costo Conversión WIP",
        periodMovements: "Movimientos del Período",
        unitsStarted: "Unidades Iniciadas",
        unitsCompleted: "Unidades Completadas",
        endingWIPCC: "CC% WIP Final",
        calculateWIP: "Calcular Valoración WIP",
        wipResults: "Resultados WIP",
        physicalFlow: "Flujo Físico",
        openingWIPLabel: "WIP de Apertura",
        started: "Iniciadas",
        completed: "Completadas",
        startedCompleted: "Iniciadas & Completadas",
        endingWIP: "WIP Final",
        equivalentUnits: "Unidades Equivalentes",
        costPerEU: "Costo por Unidad Equivalente",
        completingOpeningWIP: "Completando WIP de Apertura",
        openingDM: "DM de Apertura",
        openingCC: "CC de Apertura",
        additionalCC: "CC Adicional para completar",
        totalOpeningWIP: "Total WIP de Apertura",
        startedAndCompleted: "Iniciadas y Completadas",
        totalStartedCompleted: "Total Iniciadas & Completadas",
        endingWIPSection: "WIP Final",
        totalEndingWIP: "Total WIP Final",
        finishedGoods: "PRODUCTOS TERMINADOS",
        units: "unidades",
        unit: "unidad",
        
        // Break-Even
        breakEvenAnalysis: "Análisis de Punto de Equilibrio",
        breakEvenTitle: "Análisis de Punto de Equilibrio",
        breakEvenSubtitle: "Análisis del punto de equilibrio y margen de contribución",
        productInfo: "Información del Producto",
        productName: "Nombre del Producto",
        sellingPrice: "Precio de Venta",
        variableCosts: "Costos Variables",
        variableCostPerUnit: "Costo Variable por Unidad",
        variableCostBreakdown: "Detalle (opcional)",
        fixedCosts: "Costos Fijos",
        totalFixedCosts: "Costos Fijos Totales",
        fixedCostBreakdown: "Detalle (opcional)",
        targetAnalysis: "Análisis Objetivo (Opcional)",
        targetProfit: "Beneficio Objetivo",
        expectedSales: "Ventas Esperadas",
        calculateBreakEven: "Calcular Punto de Equilibrio",
        contributionMargin: "Margen de Contribución",
        contributionMarginRatio: "Ratio de Margen de Contribución",
        breakEvenUnits: "Punto de Equilibrio (Unidades)",
        breakEvenRevenue: "Punto de Equilibrio (Ingresos)",
        unitsForTarget: "Unidades para Beneficio Objetivo",
        marginOfSafety: "Margen de Seguridad",
        marginOfSafetyPercent: "Margen de Seguridad %",
        operatingLeverage: "Apalancamiento Operativo",
        breakEvenChart: "Gráfico Punto de Equilibrio",
        revenue: "Ingresos",
        totalCost: "Costo Total",
        exportPDF: "Exportar PDF",
        exportExcel: "Exportar Excel",
        sensitivityAnalysis: "Análisis de Sensibilidad",
        fixedCostsChange: "Cambio Costos Fijos (%)",
        variableCostsChange: "Cambio Costos Variables (%)",
        priceChange: "Cambio Precio (%)",
        interpretation: "Interpretación",
        sensitivityLow: "Impacto mínimo en el punto de equilibrio",
        sensitivityModerate: "Impacto moderado en el punto de equilibrio",
        sensitivityHigh: "Impacto significativo en el punto de equilibrio",
        sensitivityVeryHigh: "Impacto muy elevado en el punto de equilibrio",
        bepIncreased: "El punto de equilibrio aumentó, se necesitan más ventas",
        bepDecreased: "El punto de equilibrio disminuyó, se necesitan menos ventas",
        scenario: "Escenario",
        baseScenario: "Base",
        newScenario: "Nuevo",
        mosImproved: "El margen de seguridad mejoró significativamente. La empresa tiene más colchón antes de llegar al punto de equilibrio",
        mosSlightlyImproved: "El margen de seguridad mejoró ligeramente",
        mosSlightlyWorse: "El margen de seguridad empeoró ligeramente",
        mosWorse: "El margen de seguridad empeoró significativamente. La empresa está más cerca del punto de equilibrio y por lo tanto más en riesgo",
        mosWarning: "Advertencia: margen muy bajo!",
        mosGood: "Margen de seguridad confortable",
        showProcedimento: "Mostrar Procedimiento",
        procedimento: "Procedimiento de Cálculo",
        setupSystem: "Configuración del Sistema",
        reciprocalExplanation: "El método recíproco resuelve un sistema de ecuaciones simultáneas para asignar los costos de los departamentos de soporte, considerando los servicios recíprocos entre ellos",
        simultaneousEquations: "Ecuaciones Simultáneas",
        systemSolution: "Solución del Sistema",
        allocationToProduction: "Asignación a Departamentos de Producción",
        inputData: "Datos de Entrada",
        finalValuation: "Valoración Final",
        valuation: "Valoración"
    },
    
    ca: {
        // Sidebar
        appTitle: "Comptabilitat de Costos",
        appSubtitle: "Eines Professionals",
        reciprocalMethod: "Mètode Recíproc",
        wipValuation: "Valoració WIP",
        
        // Reciprocal Method
        reciprocalTitle: "Mètode Recíproc",
        reciprocalSubtitle: "Resolució d'exercicis amb Equacions Simultànies",
        step1Title: "Definir Departaments",
        step2Title: "Introduir Costos Primaris",
        step3Title: "Introduir Unitats de Servei Prestades",
        step4Title: "Bases d'Assignació (Opcional)",
        step4Subtitle: "Introdueix les bases (ex. u.o, hores màquina) per calcular les taxes de cost",
        supportDepts: "Departaments de Suport",
        productionDepts: "Departaments de Producció",
        addSupport: "+ Afegir Suport",
        addProduction: "+ Afegir Producció",
        confirmDepts: "Confirmar Departaments →",
        confirmCosts: "Confirmar Costos →",
        confirmUnits: "Confirmar Unitats →",
        calculateResults: "Calcular Resultats",
        results: "Resultats",
        directCost: "Cost directe",
        totalUnits: "Total unitats",
        costRate: "Taxa de cost",
        allocated: "Assignat",
        allocationDetails: "Detalls d'Assignació",
        total: "TOTAL",
        totalGeneral: "TOTAL GENERAL",
        
        // WIP
        wipTitle: "Valoració WIP",
        wipSubtitle: "Càlcul de la valoració del Work in Process",
        baseConfig: "Configuració Base",
        valuationMethod: "Mètode de Valoració",
        deptName: "Nom del Departament",
        periodCosts: "Costos del Període",
        materials: "Materials",
        conversionCosts: "Costos de Conversió Indirectes",
        openingWIP: "WIP d'Obertura",
        unitsInWIP: "Unitats en WIP Inicial",
        completionPercent: "% de Finalització (CC%)",
        materialsCostWIP: "Cost Materials WIP",
        conversionCostWIP: "Cost Conversió WIP",
        periodMovements: "Moviments del Període",
        unitsStarted: "Unitats Iniciades",
        unitsCompleted: "Unitats Completades",
        endingWIPCC: "CC% WIP Final",
        calculateWIP: "Calcular Valoració WIP",
        wipResults: "Resultats WIP",
        physicalFlow: "Flux Físic",
        openingWIPLabel: "WIP d'Obertura",
        started: "Iniciades",
        completed: "Completades",
        startedCompleted: "Iniciades & Completades",
        endingWIP: "WIP Final",
        equivalentUnits: "Unitats Equivalents",
        costPerEU: "Cost per Unitat Equivalent",
        completingOpeningWIP: "Completant WIP d'Obertura",
        openingDM: "DM d'Obertura",
        openingCC: "CC d'Obertura",
        additionalCC: "CC Addicional per completar",
        totalOpeningWIP: "Total WIP d'Obertura",
        startedAndCompleted: "Iniciades i Completades",
        totalStartedCompleted: "Total Iniciades & Completades",
        endingWIPSection: "WIP Final",
        totalEndingWIP: "Total WIP Final",
        finishedGoods: "PRODUCTES ACABATS",
        units: "unitats",
        unit: "unitat",
        
        // Break-Even
        breakEvenAnalysis: "Anàlisi del Punt d'Equilibri",
        breakEvenTitle: "Anàlisi del Punt d'Equilibri",
        breakEvenSubtitle: "Anàlisi del punt d'equilibri i marge de contribució",
        productInfo: "Informació del Producte",
        productName: "Nom del Producte",
        sellingPrice: "Preu de Venda",
        variableCosts: "Costos Variables",
        variableCostPerUnit: "Cost Variable per Unitat",
        variableCostBreakdown: "Detall (opcional)",
        fixedCosts: "Costos Fixos",
        totalFixedCosts: "Costos Fixos Totals",
        fixedCostBreakdown: "Detall (opcional)",
        targetAnalysis: "Anàlisi Objectiu (Opcional)",
        targetProfit: "Benefici Objectiu",
        expectedSales: "Vendes Esperades",
        calculateBreakEven: "Calcular Punt d'Equilibri",
        contributionMargin: "Marge de Contribució",
        contributionMarginRatio: "Ràtio de Marge de Contribució",
        breakEvenUnits: "Punt d'Equilibri (Unitats)",
        breakEvenRevenue: "Punt d'Equilibri (Ingressos)",
        unitsForTarget: "Unitats per Benefici Objectiu",
        marginOfSafety: "Marge de Seguretat",
        marginOfSafetyPercent: "Marge de Seguretat %",
        operatingLeverage: "Palanquejament Operatiu",
        breakEvenChart: "Gràfic Punt d'Equilibri",
        revenue: "Ingressos",
        totalCost: "Cost Total",
        exportPDF: "Exportar PDF",
        exportExcel: "Exportar Excel",
        sensitivityAnalysis: "Anàlisi de Sensibilitat",
        fixedCostsChange: "Canvi Costos Fixos (%)",
        variableCostsChange: "Canvi Costos Variables (%)",
        priceChange: "Canvi Preu (%)",
        interpretation: "Interpretació",
        sensitivityLow: "Impacte mínim en el punt d'equilibri",
        sensitivityModerate: "Impacte moderat en el punt d'equilibri",
        sensitivityHigh: "Impacte significatiu en el punt d'equilibri",
        sensitivityVeryHigh: "Impacte molt elevat en el punt d'equilibri",
        bepIncreased: "El punt d'equilibri ha augmentat, es necessiten més vendes",
        bepDecreased: "El punt d'equilibri ha disminuït, es necessiten menys vendes",
        scenario: "Escenari",
        baseScenario: "Base",
        newScenario: "Nou",
        mosImproved: "El marge de seguretat ha millorat significativament. L'empresa té més coixí abans d'arribar al punt d'equilibri",
        mosSlightlyImproved: "El marge de seguretat ha millorat lleugerament",
        mosSlightlyWorse: "El marge de seguretat ha empitjorat lleugerament",
        mosWorse: "El marge de seguretat ha empitjorat significativament. L'empresa està més a prop del punt d'equilibri i per tant més en risc",
        mosWarning: "Atenció: marge molt baix!",
        mosGood: "Marge de seguretat confortable",
        showProcedimento: "Mostrar Procediment",
        procedimento: "Procediment de Càlcul",
        setupSystem: "Configuració del Sistema",
        reciprocalExplanation: "El mètode recíproc resol un sistema d'equacions simultànies per assignar els costos dels departaments de suport, considerant els serveis recíprocs entre ells",
        simultaneousEquations: "Equacions Simultànies",
        systemSolution: "Solució del Sistema",
        allocationToProduction: "Assignació a Departaments de Producció",
        inputData: "Dades d'Entrada",
        finalValuation: "Valoració Final",
        valuation: "Valoració"
    }
};

let currentLang = 'it';

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('preferredLanguage', lang);
    updateAllTexts();
    
    // Update select dropdown
    const select = document.getElementById('languageSelect');
    if (select) {
        select.value = lang;
    }
    
    // Trigger custom event for dynamic content updates
    window.dispatchEvent(new CustomEvent('languageChanged', { detail: { lang } }));
}

function t(key) {
    return translations[currentLang][key] || key;
}

function updateAllTexts() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key);
    });
    
    // Update placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        el.placeholder = t(key);
    });
}

// Initialize language on load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('preferredLanguage') || 'it';
    setLanguage(savedLang);
});
